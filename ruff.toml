# Google Python 编码规范配置
# 参考文档: https://google.github.io/styleguide/pyguide.html

line-length = 79

# Python 版本
target-version = "py313"

[lint]
# 选择要启用的规则
select = [
    "E",   # pycodestyle 错误
    "W",   # pycodestyle 警告
    "F",   # Pyflakes
    "I",   # isort
    "N",   # PEP8 命名规范
    "UP",  # pyupgrade
    "B",   # flake8-bugbear
    "C4",  # flake8-comprehensions
    "SIM", # flake8-simplify
    "D",   # pydocstyle
    "ANN", # flake8-annotations
    "S",   # flake8-bandit
    "RUF", # Ruff 特定规则
]

# 忽略的规则（根据 Google 风格调整）
ignore = [
    "D203",      # 与 D211 冲突
    "D213",      # 与 D212 冲突
    "D215",      # Google 风格不需要 section underline
    "D400",      # Google 风格的 docstring 不一定需要句号
    "D401",      # 第一行不一定是命令式祈使句
    "D406",      # Google 风格使用冒号
    "D407",      # Google 风格不需要 dash
    "D413",      # Google 风格不需要空行
]

# 允许自动修正
fixable = ["ALL"]
unfixable = []



[lint.per-file-ignores]
# 示例目录和测试文件的特殊处理
"examples/**/*.py" = [
    "ANN",       # 示例代码不需要类型注解
    "S101",      # 允许使用 assert
]

[lint.pydocstyle]
# 使用 Google 风格的 docstring
convention = "google"

[lint.isort]
# 导入排序配置（Google 风格）
known-first-party = ["langmem0"]
force-single-line = false
lines-after-imports = 2

[format]
# 格式化配置
indent-style = "space"
quote-style = "double"
skip-magic-trailing-comma = false
line-ending = "auto"

[lint.flake8-annotations]
# 类型注解配置
allow-star-arg-any = true

[lint.flake8-bandit]
# 安全检查配置
check-typed-exception = true
